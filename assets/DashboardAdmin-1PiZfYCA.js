import{r as a,j as e}from"./index-BEzqX440.js";import{A as m,C as H,a as J,R as M,b as f,c as Q,B as L,F as N,N as v,S as E,d as R,e as F,L as Y}from"./Iconbar-BZvpbMnc.js";import{s as x}from"./supabaseClient-CajM-psZ.js";import"./index-C4FrtlOO.js";/* empty css            */const P=()=>{const[u,l]=a.useState([]),h=async()=>{const{data:n,error:t}=await x.from("chats").select("*").eq("status","open").is("admin_id",null);t?console.error("Error fetching chats:",t):l(n||[])};a.useEffect(()=>{h()},[]);const r=async(n,t)=>{try{const{error:c}=await x.from("chats").update({jawaban:t}).eq("id",n);c?alert("Error sending response: "+c.message):(alert("Jawaban berhasil disimpan!"),h())}catch(c){console.error("Unexpected error:",c)}};return e.jsxs("div",{children:[e.jsx("h2",{children:"Open Chats"}),e.jsx("h5",{children:"FREQUENTLY ASKED QUESTIONS"}),e.jsx("p",{children:"Pertanyaan yang sering ditanyakan"}),e.jsx("div",{className:"overflow-auto",style:{maxHeight:"380px",border:"1px solid #ccc",borderRadius:"10px",padding:"10px"},children:e.jsx(m,{defaultActiveKey:["0"],flush:!0,children:u.map((n,t)=>e.jsxs(m.Item,{eventKey:String(t),children:[e.jsx(m.Header,{children:e.jsx("span",{style:{marginRight:"10px"},children:n.pertanyaan})}),e.jsxs(m.Body,{children:[e.jsx("p",{children:n.jawaban||"Belum ada jawaban dari admin."}),e.jsx("textarea",{placeholder:"Masukkan jawaban",onChange:c=>{n.jawaban=c.target.value}}),e.jsx("button",{onClick:()=>{r(n.id,n.jawaban)},children:"Kirim Jawaban"})]})]},n.id))})})]})},se=()=>{const[u,l]=a.useState([]),[h,r]=a.useState(null),[n,t]=a.useState(null),[c,j]=a.useState(null),[I,y]=a.useState(null),[b,T]=a.useState([]),[q,B]=a.useState([]),[A,D]=a.useState([]),[g,C]=a.useState(null);a.useEffect(()=>{(async()=>{const{data:i}=await x.auth.getSession();C(i==null?void 0:i.session)})();const{data:o}=x.auth.onAuthStateChange((i,p)=>{(i==="SIGNED_IN"||i==="SIGNED_OUT")&&C(p)});return()=>{o==null||o.subscription.unsubscribe()}},[]);const W=s=>{y(s),r(s==="signin"?e.jsx(E,{switchToSignup:w}):s==="signup"?e.jsx(R,{switchToLogin:S}):null)},w=()=>{r(e.jsx(R,{switchToLogin:S}))},S=()=>{r(e.jsx(E,{switchToSignup:w}))},O=async()=>{await x.auth.signOut(),r(null),y(null),window.location.replace("/portofolio-burhan/lphelpdesk")};a.useEffect(()=>{(async()=>{const{data:o,error:i}=await x.from("faq").select("*");if(i)console.error(i);else{T(o);const p={};o.forEach(d=>{p[d.category]||(p[d.category]=0),p[d.category]+=d.likes});const _=["All Category",...Object.entries(p).sort(([,d],[,G])=>G-d).map(([d])=>d)];D(_),l([]),t(null),j("tulis")}})()},[]),a.useEffect(()=>{(async()=>{const{data:o,error:i}=await x.from("layanan").select("*");i?console.error(i):B(o)})()},[]);const U=s=>{j(s),s==="faq"?(l(A),t(e.jsx(F,{faqs:b,selectedCategory:"All Category"}))):s==="layanan"?(l([]),t(e.jsx(Y,{layananData:q}))):s==="tulis"?(l([]),t(e.jsx(P,{}))):(l([]),t(null))},K=s=>{t(e.jsx(F,{faqs:b,selectedCategory:s}))},k=s=>{s==="left"?l([]):s==="right"&&r(null)};return e.jsxs(H,{fluid:!0,className:"vh-100 d-flex flex-column",style:{padding:"12px"},children:[e.jsx(J,{user:g,handleLogout:O,handleButtonClick:W,selectedButton:I}),e.jsxs(M,{className:"flex-grow-1",style:{padding:"12px"},children:[e.jsx(f,{className:"bg-secondary p-3 d-flex flex-column align-items-center",style:{borderRadius:"15px",minWidth:"56px",maxWidth:"56px"},children:e.jsx(Q,{user:g,handleIconClick:U,selectedIcon:c})}),e.jsxs(f,{className:"bg-light p-3",style:{borderRadius:"15px",marginRight:"12px",maxWidth:u.length>0?"210px":"0px",minWidth:u.length>0?"210px":"0px",transition:"max-width 0.3s ease-in-out, min-width 0.3s ease-in-out",overflow:"hidden",border:u.length>0?"solid 1px":"solid 0px"},children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(L,{variant:"link",onClick:()=>k("left"),children:e.jsx(N,{})})}),e.jsx(v,{className:"flex-column",children:u.map((s,o)=>e.jsx(v.Link,{href:"#item",className:"text-dark",onClick:()=>K(s),children:s},o))})]}),e.jsx(f,{className:"bg-light p-4",style:{border:"1px solid",borderRadius:"15px",overflowY:"auto",height:"100%"},children:n}),e.jsxs(f,{className:"bg-light p-3",style:{borderTopLeftRadius:"15px",borderBottomLeftRadius:"15px",marginLeft:"12px",maxWidth:h?"210px":"0px",minWidth:h?"210px":"0px",transition:"max-width 0.3s ease-in-out, min-width 0.3s ease-in-out",overflow:"hidden",border:h?"solid 1px":"solid 0px"},children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(L,{variant:"link",onClick:()=>k("right"),children:e.jsx(N,{})})}),g?null:h]})]})]})};export{se as default};
