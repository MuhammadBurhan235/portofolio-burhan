import{r as i,j as t}from"./index-DRSWqOyV.js";import{s as x}from"./supabaseClient-45D38vQc.js";const j=()=>{const[s,g]=i.useState([]),[a,d]=i.useState(0),[u,l]=i.useState([]);i.useEffect(()=>{(async()=>{const{data:n,error:r}=await x.from("mosque_images").select("image_url");if(r){console.error(r.message);return}g(n.map(o=>o.image_url)),n.length>0&&await c(n[0].image_url)})()},[]);const c=async e=>{const{data:n,error:r}=await x.from("image_pins").select("*").eq("image_url",e);if(r){console.error(r.message);return}l(n.map(o=>({id:o.id,x:o.x,y:o.y,tag:o.tag})))},h=async()=>{const e=a===s.length-1?0:a+1;d(e),l([]),await c(s[e])},y=async()=>{const e=a===0?s.length-1:a-1;d(e),l([]),await c(s[e])};return t.jsx("div",{style:{textAlign:"center"},children:s.length>0?t.jsxs("div",{children:[t.jsxs("div",{style:{position:"relative",display:"inline-block",marginBottom:"20px",cursor:"pointer"},children:[t.jsx("img",{src:s[a],alt:`Uploaded ${a}`,style:{width:"100%",maxWidth:"800px",height:"auto"}}),u.map((e,n)=>e.x&&e.y?t.jsx("div",{style:{position:"absolute",top:`${e.y}%`,left:`${e.x}%`,transform:"translate(-50%, -50%)",width:"20px",height:"20px",backgroundColor:"red",borderRadius:"50%",animation:"blink 1s infinite",cursor:"pointer"},children:e.tag&&t.jsx("span",{style:{position:"absolute",top:"25px",left:"50%",transform:"translateX(-50%)",backgroundColor:"white",padding:"2px 5px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",color:"black"},children:e.tag})},n):null)]}),t.jsxs("div",{children:[t.jsx("button",{onClick:y,style:m,children:"Previous"}),t.jsx("button",{onClick:h,style:m,children:"Next"})]}),t.jsxs("p",{children:["Image ",a+1," of ",s.length]})]}):t.jsx("p",{children:"No images uploaded yet."})})},m={padding:"10px 20px",margin:"10px",fontSize:"16px",cursor:"pointer"},p=document.createElement("style");p.innerHTML=`
  @keyframes blink {
    0% { opacity: 1; }
    50% { opacity: 0; }
    100% { opacity: 1; }
  }
`;document.head.appendChild(p);export{j as default};
