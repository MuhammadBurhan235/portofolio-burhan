import{r as a,j as e}from"./index-CVYF3-cJ.js";import{C as M,a as Y,R as z,b as h,c as H,B as S,F as w,N as L,S as N,d as k,e as F,L as J}from"./Iconbar-D1shs53Y.js";import{s as d}from"./supabaseClient-DaJVRlD7.js";import"./index-B543s4IE.js";/* empty css            */const $=()=>{const[u,r]=a.useState([]),[x,i]=a.useState(null),[R,c]=a.useState(null),[v,f]=a.useState(null),[E,m]=a.useState(null),[g,I]=a.useState([]),[T,q]=a.useState([]),[B,W]=a.useState([]),[p,y]=a.useState(null);a.useEffect(()=>{(async()=>{const{data:t}=await d.auth.getSession();y(t==null?void 0:t.session)})();const{data:n}=d.auth.onAuthStateChange((t,l)=>{(t==="SIGNED_IN"||t==="SIGNED_OUT")&&y(l)});return()=>{n==null||n.subscription.unsubscribe()}},[]);const D=s=>{m(s),i(s==="signin"?e.jsx(N,{switchToSignup:j}):s==="signup"?e.jsx(k,{switchToLogin:C}):null)},j=()=>{i(e.jsx(k,{switchToLogin:C}))},C=()=>{i(e.jsx(N,{switchToSignup:j}))},A=async()=>{await d.auth.signOut(),i(null),m(null),window.location.replace("/portofolio-burhan/lphelpdesk")};a.useEffect(()=>{(async()=>{const{data:n,error:t}=await d.from("faq").select("*");if(t)console.error(t);else{I(n);const l={};n.forEach(o=>{l[o.category]||(l[o.category]=0),l[o.category]+=o.likes});const U=["All Category",...Object.entries(l).sort(([,o],[,_])=>_-o).map(([o])=>o)];W(U),r([]),c(null),f("tulis")}})()},[]),a.useEffect(()=>{(async()=>{const{data:n,error:t}=await d.from("layanan").select("*");t?console.error(t):q(n)})()},[]);const O=s=>{f(s),s==="faq"?(r(B),c(e.jsx(F,{faqs:g,selectedCategory:"All Category"}))):s==="layanan"?(r([]),c(e.jsx(J,{layananData:T}))):(r([]),c(null))},G=s=>{c(e.jsx(F,{faqs:g,selectedCategory:s}))},b=s=>{s==="left"?r([]):s==="right"&&i(null)};return e.jsxs(M,{fluid:!0,className:"vh-100 d-flex flex-column",style:{padding:"12px"},children:[e.jsx(Y,{user:p,handleLogout:A,handleButtonClick:D,selectedButton:E}),e.jsxs(z,{className:"flex-grow-1",style:{padding:"12px"},children:[e.jsx(h,{className:"bg-secondary p-3 d-flex flex-column align-items-center",style:{borderRadius:"15px",minWidth:"56px",maxWidth:"56px"},children:e.jsx(H,{user:p,handleIconClick:O,selectedIcon:v})}),e.jsxs(h,{className:"bg-light p-3",style:{borderRadius:"15px",marginRight:"12px",maxWidth:u.length>0?"210px":"0px",minWidth:u.length>0?"210px":"0px",transition:"max-width 0.3s ease-in-out, min-width 0.3s ease-in-out",overflow:"hidden",border:u.length>0?"solid 1px":"solid 0px"},children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(S,{variant:"link",onClick:()=>b("left"),children:e.jsx(w,{})})}),e.jsx(L,{className:"flex-column",children:u.map((s,n)=>e.jsx(L.Link,{href:"#item",className:"text-dark",onClick:()=>G(s),children:s},n))})]}),e.jsx(h,{className:"bg-light p-4",style:{border:"1px solid",borderRadius:"15px",overflowY:"auto",height:"100%"},children:R}),e.jsxs(h,{className:"bg-light p-3",style:{borderTopLeftRadius:"15px",borderBottomLeftRadius:"15px",marginLeft:"12px",maxWidth:x?"210px":"0px",minWidth:x?"210px":"0px",transition:"max-width 0.3s ease-in-out, min-width 0.3s ease-in-out",overflow:"hidden",border:x?"solid 1px":"solid 0px"},children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(S,{variant:"link",onClick:()=>b("right"),children:e.jsx(w,{})})}),p?null:x]})]})]})};export{$ as default};
