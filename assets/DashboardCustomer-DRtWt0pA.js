import{r as h,j as s}from"./index-DRSWqOyV.js";import{B as C,R as q,b as j,f as K,C as be,a as we,c as ve,F as De,S as ee,d as te,e as ne,L as Me}from"./Iconbar-bedrqLlb.js";import{s as w}from"./supabaseClient-45D38vQc.js";import{C as T,S as ae,a as Se}from"./SidebarL--B20huNz.js";import"./index-BoMuKdIb.js";/* empty css            */const oe=6e4,ce=36e5,I=43200,re=1440,se=Symbol.for("constructDateFrom");function L(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&se in e?e[se](n):e instanceof Date?new e.constructor(n):new Date(n)}function v(e,n){return L(e,e)}let je={};function Ce(){return je}function ie(e){const n=v(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function X(e,...n){const t=L.bind(null,e||n.find(a=>typeof a=="object"));return n.map(t)}function Y(e,n){const t=+v(e)-+v(n);return t<0?-1:t>0?1:t}function Ne(e){return L(e,Date.now())}function Te(e,n,t){const[a,r]=X(t==null?void 0:t.in,e,n),c=a.getFullYear()-r.getFullYear(),o=a.getMonth()-r.getMonth();return c*12+o}function ke(e){return n=>{const a=(e?Math[e]:Math.trunc)(n);return a===0?0:a}}function We(e,n){return+v(e)-+v(n)}function Pe(e,n){const t=v(e);return t.setHours(23,59,59,999),t}function Fe(e,n){const t=v(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}function Ie(e,n){const t=v(e);return+Pe(t)==+Fe(t)}function Re(e,n,t){const[a,r,c]=X(t==null?void 0:t.in,e,e,n),o=Y(r,c),i=Math.abs(Te(r,c));if(i<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*i);let y=Y(r,c)===-o;Ie(a)&&i===1&&Y(a,c)===1&&(y=!1);const d=o*(i-+y);return d===0?0:d}function Ye(e,n,t){const a=We(e,n)/1e3;return ke(t==null?void 0:t.roundingMethod)(a)}const Le={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Oe=(e,n,t)=>{let a;const r=Le[e];return typeof r=="string"?a=r:n===1?a=r.one:a=r.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+a:a+" ago":a};function U(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const Ee={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ae={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ue={date:U({formats:Ee,defaultWidth:"full"}),time:U({formats:Ae,defaultWidth:"full"}),dateTime:U({formats:_e,defaultWidth:"full"})},ze={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qe=(e,n,t,a)=>ze[e];function k(e){return(n,t)=>{const a=t!=null&&t.context?String(t.context):"standalone";let r;if(a==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,i=t!=null&&t.width?String(t.width):o;r=e.formattingValues[i]||e.formattingValues[o]}else{const o=e.defaultWidth,i=t!=null&&t.width?String(t.width):e.defaultWidth;r=e.values[i]||e.values[o]}const c=e.argumentCallback?e.argumentCallback(n):n;return r[c]}}const Xe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Be={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},He={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Je={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ve={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ge=(e,n)=>{const t=Number(e),a=t%100;if(a>20||a<10)switch(a%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},$e={ordinalNumber:Ge,era:k({values:Xe,defaultWidth:"wide"}),quarter:k({values:Be,defaultWidth:"wide",argumentCallback:e=>e-1}),month:k({values:He,defaultWidth:"wide"}),day:k({values:Je,defaultWidth:"wide"}),dayPeriod:k({values:Ve,defaultWidth:"wide",formattingValues:Qe,defaultFormattingWidth:"wide"})};function W(e){return(n,t={})=>{const a=t.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],c=n.match(r);if(!c)return null;const o=c[0],i=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],y=Array.isArray(i)?Ke(i,x=>x.test(o)):Ze(i,x=>x.test(o));let d;d=e.valueCallback?e.valueCallback(y):y,d=t.valueCallback?t.valueCallback(d):d;const l=n.slice(o.length);return{value:d,rest:l}}}function Ze(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function Ke(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function et(e){return(n,t={})=>{const a=n.match(e.matchPattern);if(!a)return null;const r=a[0],c=n.match(e.parsePattern);if(!c)return null;let o=e.valueCallback?e.valueCallback(c[0]):c[0];o=t.valueCallback?t.valueCallback(o):o;const i=n.slice(r.length);return{value:o,rest:i}}}const tt=/^(\d+)(th|st|nd|rd)?/i,nt=/\d+/i,at={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rt={any:[/^b/i,/^(a|c)/i]},st={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},it={any:[/1/i,/2/i,/3/i,/4/i]},ot={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ct={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ut={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},mt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ht={ordinalNumber:et({matchPattern:tt,parsePattern:nt,valueCallback:e=>parseInt(e,10)}),era:W({matchPatterns:at,defaultMatchWidth:"wide",parsePatterns:rt,defaultParseWidth:"any"}),quarter:W({matchPatterns:st,defaultMatchWidth:"wide",parsePatterns:it,defaultParseWidth:"any",valueCallback:e=>e+1}),month:W({matchPatterns:ot,defaultMatchWidth:"wide",parsePatterns:ct,defaultParseWidth:"any"}),day:W({matchPatterns:lt,defaultMatchWidth:"wide",parsePatterns:dt,defaultParseWidth:"any"}),dayPeriod:W({matchPatterns:ut,defaultMatchWidth:"any",parsePatterns:mt,defaultParseWidth:"any"})},ft={code:"en-US",formatDistance:Oe,formatLong:Ue,formatRelative:qe,localize:$e,match:ht,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gt(e,n,t){const a=Ce(),r=(t==null?void 0:t.locale)??a.locale??ft,c=2520,o=Y(e,n);if(isNaN(o))throw new RangeError("Invalid time value");const i=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:o}),[y,d]=X(t==null?void 0:t.in,...o>0?[n,e]:[e,n]),l=Ye(d,y),x=(ie(d)-ie(y))/1e3,m=Math.round((l-x)/60);let b;if(m<2)return t!=null&&t.includeSeconds?l<5?r.formatDistance("lessThanXSeconds",5,i):l<10?r.formatDistance("lessThanXSeconds",10,i):l<20?r.formatDistance("lessThanXSeconds",20,i):l<40?r.formatDistance("halfAMinute",0,i):l<60?r.formatDistance("lessThanXMinutes",1,i):r.formatDistance("xMinutes",1,i):m===0?r.formatDistance("lessThanXMinutes",1,i):r.formatDistance("xMinutes",m,i);if(m<45)return r.formatDistance("xMinutes",m,i);if(m<90)return r.formatDistance("aboutXHours",1,i);if(m<re){const p=Math.round(m/60);return r.formatDistance("aboutXHours",p,i)}else{if(m<c)return r.formatDistance("xDays",1,i);if(m<I){const p=Math.round(m/re);return r.formatDistance("xDays",p,i)}else if(m<I*2)return b=Math.round(m/I),r.formatDistance("aboutXMonths",b,i)}if(b=Re(d,y),b<12){const p=Math.round(m/I);return r.formatDistance("xMonths",p,i)}else{const p=b%12,S=Math.trunc(b/12);return p<3?r.formatDistance("aboutXYears",S,i):p<9?r.formatDistance("overXYears",S,i):r.formatDistance("almostXYears",S+1,i)}}function xt(e,n){return gt(e,Ne(e),n)}function yt(e,n){const t=()=>L(n==null?void 0:n.in,NaN),r=vt(e);let c;if(r.date){const d=Dt(r.date,2);c=Mt(d.restDateString,d.year)}if(!c||isNaN(+c))return t();const o=+c;let i=0,y;if(r.time&&(i=St(r.time),isNaN(i)))return t();if(r.timezone){if(y=jt(r.timezone),isNaN(y))return t()}else{const d=new Date(o+i),l=v(0);return l.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),l.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),l}return v(o+i+y)}const R={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},pt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,bt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,wt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function vt(e){const n={},t=e.split(R.dateTimeDelimiter);let a;if(t.length>2)return n;if(/:/.test(t[0])?a=t[0]:(n.date=t[0],a=t[1],R.timeZoneDelimiter.test(n.date)&&(n.date=e.split(R.timeZoneDelimiter)[0],a=e.substr(n.date.length,e.length))),a){const r=R.timezone.exec(a);r?(n.time=a.replace(r[1],""),n.timezone=r[1]):n.time=a}return n}function Dt(e,n){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),a=e.match(t);if(!a)return{year:NaN,restDateString:""};const r=a[1]?parseInt(a[1]):null,c=a[2]?parseInt(a[2]):null;return{year:c===null?r:c*100,restDateString:e.slice((a[1]||a[2]).length)}}function Mt(e,n){if(n===null)return new Date(NaN);const t=e.match(pt);if(!t)return new Date(NaN);const a=!!t[4],r=P(t[1]),c=P(t[2])-1,o=P(t[3]),i=P(t[4]),y=P(t[5])-1;if(a)return Wt(n,i,y)?Ct(n,i,y):new Date(NaN);{const d=new Date(0);return!Tt(n,c,o)||!kt(n,r)?new Date(NaN):(d.setUTCFullYear(n,c,Math.max(r,o)),d)}}function P(e){return e?parseInt(e):1}function St(e){const n=e.match(bt);if(!n)return NaN;const t=z(n[1]),a=z(n[2]),r=z(n[3]);return Pt(t,a,r)?t*ce+a*oe+r*1e3:NaN}function z(e){return e&&parseFloat(e.replace(",","."))||0}function jt(e){if(e==="Z")return 0;const n=e.match(wt);if(!n)return 0;const t=n[1]==="+"?-1:1,a=parseInt(n[2]),r=n[3]&&parseInt(n[3])||0;return Ft(a,r)?t*(a*ce+r*oe):NaN}function Ct(e,n,t){const a=new Date(0);a.setUTCFullYear(e,0,4);const r=a.getUTCDay()||7,c=(n-1)*7+t+1-r;return a.setUTCDate(a.getUTCDate()+c),a}const Nt=[31,null,31,30,31,30,31,31,30,31,30,31];function le(e){return e%400===0||e%4===0&&e%100!==0}function Tt(e,n,t){return n>=0&&n<=11&&t>=1&&t<=(Nt[n]||(le(e)?29:28))}function kt(e,n){return n>=1&&n<=(le(e)?366:365)}function Wt(e,n,t){return n>=1&&n<=53&&t>=0&&t<=6}function Pt(e,n,t){return e===24?n===0&&t===0:t>=0&&t<60&&n>=0&&n<60&&e>=0&&e<25}function Ft(e,n){return n>=0&&n<=59}const It=()=>{const[e,n]=h.useState([]);h.useEffect(()=>{const l=async()=>{const{data:b,error:p}=await w.from("reports").select("*");p?console.error("Error fetching reports:",p):n(b)};l();const x=w.channel("reports").on("postgres_changes",{event:"INSERT",schema:"public",table:"reports"},b=>{const p=b.new;p&&p.id&&p.created_at&&n(S=>[p,...S])}).subscribe(),m=setInterval(()=>{console.log("Fetching reports via interval..."),l()},6e3);return()=>{w.removeChannel(x),clearInterval(m)}},[]);const[t,a]=h.useState({}),[r,c]=h.useState(new Date),[o,i]=h.useState("IG");h.useEffect(()=>{const l=setInterval(()=>{c(new Date)},1e3);return()=>clearInterval(l)},[]);const y=l=>{const x=yt(l),m=xt(x,{addSuffix:!0});return Math.floor((r.getTime()-x.getTime())/(1e3*3600*24))>7?x.toLocaleDateString():m},d=(l,x)=>{a(m=>({...m,[l]:x}))};return s.jsxs("div",{children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[s.jsx("h5",{className:"text-center",children:"Reports Portal"}),s.jsxs("div",{className:"btn-group",children:[s.jsx(C,{variant:o==="IG"?"primary":"secondary",onClick:()=>i("IG"),children:"Mode IG"}),s.jsx(C,{variant:o==="YT"?"primary":"secondary",onClick:()=>i("YT"),children:"Mode YT"})]})]}),s.jsx("div",{className:"overflow-auto",style:{height:"400px",maxHeight:"400px",border:"1px solid #ccc",borderRadius:"10px",padding:"10px",boxSizing:"border-box"},children:s.jsx(q,{className:o==="YT"?"g-1":"",style:{display:o==="YT"?"grid":"block",gridTemplateColumns:o==="YT"?"repeat(auto-fit, minmax(300px, 1fr))":"none",margin:0},children:e.map((l,x)=>{const m=t[x]===2?l.jawaban:l.deskripsi;return s.jsx(j,{children:s.jsx(T,{className:"mb-1",style:{overflow:"hidden",borderRadius:"10px"},children:s.jsxs(q,{className:o==="YT"?"":"align-items-center",style:{padding:"10px"},children:[s.jsx(j,{md:o==="YT"?12:0,style:{height:"200px",overflow:"hidden",borderRadius:"10px"},children:s.jsx(T.Img,{src:l.image_url,style:{width:"100%",height:"100%",objectFit:"cover"}})}),s.jsx(j,{md:o==="YT"?12:8,children:s.jsxs(T.Body,{style:{display:"flex",flexDirection:"column",height:"100%",paddingBlock:o==="YT"?"30px":""},children:[s.jsxs("div",{style:{height:"84px"},children:[s.jsx(T.Title,{style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",height:"54px"},children:l.subjek}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",style:{height:"30px"},children:[o==="IG"&&s.jsxs("div",{className:"d-flex gap-2",children:[s.jsx(C,{size:"sm",variant:t[x]!==2?"primary":"secondary",onClick:()=>d(x,1),children:"Deskripsi"}),s.jsx(C,{size:"sm",variant:t[x]===2?"primary":"secondary",onClick:()=>d(x,2),children:"Jawaban"})]}),s.jsxs("div",{className:"d-flex gap-2",children:[s.jsx("span",{className:`badge bg-${l.status==="Solved"?"success":"warning"}`,children:l.status}),s.jsx("span",{className:"badge bg-info",children:l.kategori}),s.jsx("span",{className:"badge bg-secondary",children:y(l.created_at)})]})]})]}),o==="IG"&&s.jsx("div",{style:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",height:"74px",marginTop:"10px"},children:s.jsx(T.Text,{children:m})})]})})]})})},l.id)})})})]})},_t=()=>{const[e,n]=h.useState(null),[t,a]=h.useState(null),[r,c]=h.useState(null),[o,i]=h.useState(null),[y,d]=h.useState(null),[l,x]=h.useState([]),[m,b]=h.useState([]),[p,S]=h.useState([]),[O,B]=h.useState(null),[E,de]=h.useState(null),[A,ue]=h.useState([]),[F,H]=h.useState(""),[J,me]=h.useState([]);h.useEffect(()=>{(async()=>{const{data:f,error:g}=await w.from("user_roles").select("id").eq("role","admin");g?console.error("Error fetching admins:",g):me(f||[])})()},[]),h.useEffect(()=>{(async()=>{const{data:g}=await w.auth.getSession();B(g==null?void 0:g.session)})();const{data:f}=w.auth.onAuthStateChange((g,D)=>{(g==="SIGNED_IN"||g==="SIGNED_OUT")&&B(D)});return()=>{f==null||f.subscription.unsubscribe()}},[]);const he=u=>{d(u),a(u==="signin"?s.jsx(ee,{switchToSignup:V}):u==="signup"?s.jsx(te,{switchToLogin:Q}):null)},V=()=>{a(s.jsx(te,{switchToLogin:Q}))},Q=()=>{a(s.jsx(ee,{switchToSignup:V}))},fe=async()=>{await w.auth.signOut(),a(null),d(null),window.location.replace("/portofolio-burhan/lphelpdesk")};h.useEffect(()=>{(async()=>{const{data:f,error:g}=await w.from("faq").select("*");if(g)console.error(g);else{x(f);const D={};f.forEach(M=>{D[M.category]||(D[M.category]=0),D[M.category]+=M.likes});const N=["All Category",...Object.entries(D).sort(([,M],[,pe])=>pe-M).map(([M])=>M)];S(N),n(null),c(null),i("tulis")}})()},[]),h.useEffect(()=>{(async()=>{const{data:f,error:g}=await w.from("layanan").select("*");g?console.error(g):b(f)})()},[]);const ge=async u=>{de(u),G(u)},G=async u=>{try{const{data:f,error:g}=await w.from("messages").select("question, answer").eq("chats_id",u).order("timestamp",{ascending:!0});g?(console.error("Error fetching message data:",g),alert("Error fetching message data: "+g.message)):ue(f||[])}catch(f){console.error("Unexpected error:",f),alert("An unexpected error occurred while fetching message data.")}},xe=async u=>{if(u.preventDefault(),E&&F)try{const{data:{user:f},error:g}=await w.auth.getUser();if(g){console.error("Error fetching user:",g),alert("Error fetching user information.");return}const D=J[Math.floor(Math.random()*J.length)],Z=D?D.id:null,{error:N}=await w.from("messages").insert([{chats_id:E,customer_id:f==null?void 0:f.id,question:F,answer:null,admin_id:Z}]);N?(console.error("Error sending message:",N),alert("Error sending message: "+N.message)):(H(""),G(E))}catch(f){console.error("Unexpected error:",f),alert("An unexpected error occurred while sending message.")}};h.useEffect(()=>{A&&c(s.jsxs("div",{className:"d-flex flex-column",style:{height:"450px",border:"1px solid #ccc",borderRadius:"10px",padding:"10px"},children:[s.jsx("div",{className:"flex-grow-1 overflow-auto mb-2",style:{maxHeight:"400px"},children:A.map((u,f)=>s.jsxs("div",{className:"mb-2",children:[u.question&&s.jsx("div",{className:"d-flex justify-content-end mb-1",children:s.jsxs("div",{className:"p-2 bg-primary text-white rounded",children:[s.jsx("strong",{children:"Customer:"})," ",u.question]})}),u.answer&&s.jsx("div",{className:"d-flex justify-content-start mb-1",children:s.jsxs("div",{className:"p-2 bg-secondary text-white rounded",children:[s.jsx("strong",{children:"Admin:"})," ",u.answer]})})]},f))}),s.jsxs(K,{onSubmit:xe,className:"d-flex mt-2",children:[s.jsx(K.Control,{type:"text",placeholder:"Type a message",value:F,onChange:u=>H(u.target.value)}),s.jsx(C,{variant:"primary",type:"submit",className:"ms-2",children:"Kirim"})]})]}))},[A,F]);const ye=u=>{i(u),u==="faq"?(n(s.jsx(ae,{sidebarLData:p,handleClose:()=>_("left"),handleCategoryClick:$})),c(s.jsx(ne,{faqs:l,selectedCategory:"All Category"}))):u==="layanan"?(n(null),c(s.jsx(Me,{layananData:m}))):u==="tulis"?(n(s.jsx(Se,{handleChatClick:ge})),c(s.jsx("p",{className:"text-center",children:"Silahkan mulai chat atau pilih chat!"}))):u==="search"?(n(s.jsx(ae,{sidebarLData:p,handleClose:()=>_("left"),handleCategoryClick:$})),c(s.jsx(It,{}))):(n(null),c(null))},$=u=>{c(s.jsx(ne,{faqs:l,selectedCategory:u}))},_=u=>{u==="left"?n(null):u==="right"&&a(null)};return s.jsxs(be,{fluid:!0,className:"vh-100 d-flex flex-column",style:{padding:"12px"},children:[s.jsx(we,{user:O,handleLogout:fe,handleButtonClick:he,selectedButton:y}),s.jsxs(q,{className:"flex-grow-1",style:{padding:"12px"},children:[s.jsx(j,{className:"bg-secondary p-3 d-flex flex-column align-items-center",style:{borderRadius:"15px",minWidth:"56px",maxWidth:"56px"},children:s.jsx(ve,{user:O,handleIconClick:ye,selectedIcon:o})}),s.jsx(j,{className:"bg-light p-3",style:{borderRadius:"15px",marginRight:"12px",maxWidth:e?"210px":"0px",minWidth:e?"210px":"0px",transition:"max-width 0.3s ease-in-out, min-width 0.3s ease-in-out",overflow:"hidden",border:e?"solid 1px":"solid 0px"},children:e}),s.jsx(j,{className:"bg-light p-4",style:{border:"1px solid",borderRadius:"15px",overflowY:"auto",height:"100%"},children:r}),s.jsxs(j,{className:"bg-light p-3",style:{borderTopLeftRadius:"15px",borderBottomLeftRadius:"15px",marginLeft:"12px",maxWidth:t?"210px":"0px",minWidth:t?"210px":"0px",transition:"max-width 0.3s ease-in-out, min-width 0.3s ease-in-out",overflow:"hidden",border:t?"solid 1px":"solid 0px"},children:[s.jsx("div",{className:"d-flex justify-content-end",children:s.jsx(C,{variant:"link",onClick:()=>_("right"),children:s.jsx(De,{})})}),O?null:t]})]})]})};export{_t as default};
